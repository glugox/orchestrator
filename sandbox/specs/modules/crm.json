{
  "app": {
    "name": "company/crm",
    "vendor": "Company",
    "description": "CRM module exposing customers and invoices listings.",
    "version": "1.0.0"
  },
  "database": {
    "migrations": [
      {
        "name": "create_customers_table",
        "table": "customers",
        "columns": [
          {"name": "id", "type": "id"},
          {"name": "name", "type": "string"},
          {"name": "email", "type": "string"},
          {"name": "phone", "type": "string", "nullable": true},
          {"name": "created_at", "type": "timestamp", "nullable": true},
          {"name": "updated_at", "type": "timestamp", "nullable": true}
        ]
      },
      {
        "name": "create_invoices_table",
        "table": "invoices",
        "columns": [
          {"name": "id", "type": "id"},
          {"name": "customer_id", "type": "foreignId", "references": "id", "on": "customers", "onDelete": "cascade"},
          {"name": "number", "type": "string"},
          {"name": "amount", "type": "decimal", "precision": 10, "scale": 2},
          {"name": "due_date", "type": "date"},
          {"name": "created_at", "type": "timestamp", "nullable": true},
          {"name": "updated_at", "type": "timestamp", "nullable": true}
        ]
      }
    ]
  },
  "entities": {
    "Customer": {
      "table": "customers",
      "fillable": ["name", "email", "phone"],
      "relations": {
        "invoices": {
          "type": "hasMany",
          "model": "Invoice",
          "foreign_key": "customer_id"
        }
      }
    },
    "Invoice": {
      "table": "invoices",
      "fillable": ["customer_id", "number", "amount", "due_date"],
      "casts": {
        "amount": "decimal:2",
        "due_date": "date"
      },
      "relations": {
        "customer": {
          "type": "belongsTo",
          "model": "Customer",
          "foreign_key": "customer_id"
        }
      }
    }
  },
  "http": {
    "routes": [
      {
        "uri": "/crm/customers",
        "methods": ["GET"],
        "action": "CustomerController@index",
        "name": "crm.customers.index"
      }
    ],
    "controllers": {
      "CustomerController": {
        "resource": false,
        "actions": {
          "index": {
            "type": "view",
            "view": "crm::customers.index",
            "data": {
              "title": "Customers"
            }
          }
        }
      }
    },
    "views": {
      "customers/index.blade.php": {
        "layout": null,
        "sections": {
          "default": "<h1>Customers</h1>"
        }
      }
    }
  }
}
